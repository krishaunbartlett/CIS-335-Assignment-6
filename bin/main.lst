000000	COPY    START   0
000000	FIRST   MOV     RETADR,%RL
000003	        MOV     %RB,#LENGTH
000006	        BASE    LENGTH
000006	CLOOP  +JSUB    RDREC
00000A	        MOV     %RA,LENGTH
00000D	        COMP    #0
000010	        JEQ     ENDFIL
000013	       +JSUB    WRREC
000017	        J       CLOOP
00001A	ENDFIL  MOV     %RA,EOF
00001D	        MOV     BUFFER,%RA
000020	        MOV     %RA,#3
000023	        MOV     LENGTH,%RA
000026	       +JSUB    WRREC
00002A	        J       @RETADR
00002D	EOF     BYTE    C'EOF'
000030	RETADR  RESW    1
000033	LENGTH  RESW    1
000036	BUFFER  RESB    4096
001036	RDREC   CLEAR   %RX
001038	        CLEAR   %RA
00103A	        CLEAR   %RS
00103C	       +MOV     %RT,#4096
001040	RLOOP   TD      INPUT
001043	        JEQ     RLOOP
001046	        RD      INPUT
001049	        COMPR   %RA,%RS
00104B	        JEQ     EXIT
00104E	        STCH    BUFFER[%RX]
001051	        TIXR    %RT
001053	        JLT     RLOOP
001056	EXIT    MOV     LENGTH,%RX
001059	        RSUB
00105A	INPUT   BYTE    X'F3'
00105E	WRREC   CLEAR   %RX
001060	        MOV     %RT,LENGTH
001063	WLOOP   TD      OUTPUT
001066	        JEQ     WLOOP
001069	        LDCH    BUFFER[%RX]
00106C	        WD      OUTPUT
00106F	        TIXR    %RT
001071	        JLT     WLOOP
001074	        RSUB
001075	OUTPUT  BYTE    X'05'
001079	        END     FIRST
